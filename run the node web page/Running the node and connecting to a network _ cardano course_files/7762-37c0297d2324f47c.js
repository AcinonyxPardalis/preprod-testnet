"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7762],{1224:(e,t,n)=>{n.d(t,{a:()=>l});var s=n(7620);function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024,[t,n]=s.useState(!1);return s.useEffect(()=>{let t=window.matchMedia("(max-width: ".concat(e-.02,"px)"));n(t.matches);let s=e=>{n(e.matches)};return t.addEventListener("change",s),()=>{t.removeEventListener("change",s)}},[e]),t}},4788:(e,t,n)=>{n.d(t,{K:()=>i,SpaceLayoutContextProvider:()=>r});var s=n(54568),l=n(7620);let a=l.createContext({basePath:""});function r(e){let{basePath:t,children:n}=e,r=l.useMemo(()=>({basePath:t}),[t]);return(0,s.jsx)(a.Provider,{value:r,children:n})}function i(){let e=l.useContext(a);if(!e)throw Error("SpaceLayoutContext not found");return e.basePath}},21566:(e,t,n)=>{n.r(t),n.d(t,{SearchContext:()=>i,SearchContextProvider:()=>o,useSearch:()=>c,useSearchLink:()=>u});var s=n(54568),l=n(16821),a=n(7620);let r={q:l.tU,ask:l.tU,scope:(0,l.M1)(["all","default","extended","current"]).withDefault("default"),global:l.cr},i=a.createContext(null);function o(e){let{children:t}=e,[n,o]=(0,l.ab)(r,{history:"replace"});a.useEffect(()=>{(null==n?void 0:n.ask)==="true"&&(null==n?void 0:n.q)&&o({q:null,ask:n.q}),(null==n?void 0:n.global)===!0&&o({scope:"all",global:null})},[n,o]);let[c,u]=a.useState(()=>(null==n?void 0:n.q)!==null),d=a.useMemo(()=>null===n||null===n.q&&null===n.ask?null:{query:n.q,ask:n.ask,scope:n.scope,open:c},[n,c]),h=a.useRef(d);a.useLayoutEffect(()=>{h.current=d},[d]);let m=a.useCallback(e=>("function"==typeof e&&(e=e(h.current)),null===e)?(u(!1),o({q:null,ask:null,scope:"default"})):(u(e.open),o({q:e.query,ask:e.ask,scope:e.scope})),[o]);return(0,s.jsx)(i.Provider,{value:{state:d,setState:m},children:t})}function c(){let e=a.useContext(i);if(!e)throw Error("useSearch must be used within SearchContextProvider");return[e.state,e.setState]}function u(){let[,e]=c();return a.useCallback((t,n)=>{let s=new URLSearchParams;return t.query?s.set("q",t.query):s.delete("q"),t.ask?s.set("ask",t.ask):s.delete("ask"),t.scope?s.set("scope",t.scope):s.delete("scope"),{href:"?".concat(s.toString()),prefetch:!1,onClick:s=>{s.preventDefault(),null==n||n(),e(e=>({...e,query:void 0!==t.query?t.query:null,ask:void 0!==t.ask?t.ask:null,scope:void 0!==t.scope?t.scope:"default",open:void 0!==t.open&&t.open}))}}},[e])}},22399:(e,t,n)=>{n.r(t),n.d(t,{LoadIntegrations:()=>u,integrationAssistants:()=>o,integrationsAssistantTools:()=>i,useIntegrationAssistants:()=>c});var s=n(7620),l=n(26768),a=n(13368);let r=new Map,i=l.y(()=>({tools:[]})),o=l.y(()=>[]);function c(){return a.P(o)}function u(){return s.useEffect(()=>{!function(e){for(var t,n=arguments.length,s=Array(n>1?n-1:0),l=1;l<n;l++)s[l-1]=arguments[l];null==(t=r.get(e))||t.forEach(e=>e(...s))}("load")},[]),null}window.GitBook={addEventListener:(e,t)=>{var n;let s=null!=(n=r.get(e))?n:[];s.push(t),r.set(e,s)},removeEventListener:(e,t)=>{var n;let s=null!=(n=r.get(e))?n:[],l=s.indexOf(t);-1!==l&&s.splice(l,1)},registerTool:e=>{i.setState(t=>({tools:[...t.tools,e]}))},registerAssistant:e=>{let t=window.crypto.randomUUID();return o.setState(n=>{var s;return[...n,{...e,id:t,ui:null==(s=e.ui)||s,mode:"overlay",pageAction:!1}]},!0),()=>{o.setState(e=>e.filter(e=>e.id!==t),!0)}}}},27143:(e,t,n)=>{n.r(t),n.d(t,{SearchInput:()=>h});var s=n(54568),l=n(7620),a=n(88118),r=n(98743),i=n(82745),o=n(54217),c=n(85598),u=n(52288);let d=["text-sm","px-3.5","py-1.5","@2xl:circular-corners:px-4"],h=l.forwardRef(function(e,t){let{onChange:n,onKeyDown:h,onFocus:m,value:p,withAI:x,isOpen:f,className:g,children:v,...b}=e,y=(0,l.useRef)(null),k=(0,a.ok)(),j=(0,u.K)(["ButtonStyles"]);return(0,l.useEffect)(()=>{var e,t,n;f?document.activeElement!==y.current&&(null==(e=y.current)||e.focus({preventScroll:!0}),null==(t=y.current)||t.setSelectionRange(p.length,p.length)):null==(n=y.current)||n.blur()},[f,p]),(0,s.jsx)("div",{className:(0,r.P)("relative flex size-9 grow",g),children:(0,s.jsxs)("div",{ref:t,onClick:m,className:(0,r.P)(j,o.ST.header,d,"has-[input:focus]:-translate-y-px h-9 grow @2xl:cursor-text cursor-pointer px-2.5 has-[input:focus]:bg-tint-base has-[input:focus]:depth-subtle:shadow-lg has-[input:focus]:depth-subtle:shadow-primary-subtle has-[input:focus-visible]:ring-2 has-[input:focus-visible]:ring-primary-hover","theme-bold:border-header-link/3 has-[input:focus-visible]:theme-bold:border-header-link/5 has-[input:focus-visible]:theme-bold:bg-header-link/3 has-[input:focus-visible]:theme-bold:ring-header-link/5","theme-bold:before:absolute theme-bold:before:inset-0 theme-bold:before:bg-header-background/7 theme-bold:before:backdrop-blur-xl ","@max-2xl:absolute relative @max-2xl:right-0 z-30 max-w-none shrink grow justify-start",f?"@max-2xl:w-56":"@max-2xl:w-[38px]"),children:[p&&f?(0,s.jsx)(o.$n,{variant:"blank",label:(0,a.si)(k,"clear"),size:"medium",iconOnly:!0,icon:"circle-xmark",className:"-ml-1.5 -mr-1 animate-scale-in px-1.5 theme-bold:text-header-link theme-bold:hover:bg-header-link/3",onClick:()=>{var e;n(""),null==(e=y.current)||e.focus()}}):(0,s.jsx)(i.Icon,{icon:"magnifying-glass",className:"size-4 shrink-0 animate-scale-in"}),v,(0,s.jsx)("input",{...b,type:"text",onFocus:m,onKeyDown:h,onChange:e=>n(e.target.value),value:p,placeholder:"".concat((0,a.si)(k,x?"search_or_ask":"search"),"…"),maxLength:512,size:10,"data-testid":"search-input",className:(0,r.P)("peer z-10 min-w-0 grow bg-transparent py-0.5 text-tint-strong theme-bold:text-header-link outline-hidden transition-[width] duration-300 contain-paint placeholder:text-tint theme-bold:placeholder:text-current theme-bold:placeholder:opacity-7",f?"":"@max-2xl:opacity-0"),role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-haspopup":"listbox","aria-expanded":p&&f?"true":"false",ref:y}),(0,s.jsx)(c.S,{keys:f?["esc"]:["mod","k"],className:"last:-mr-1 theme-bold:border-header-link/5 theme-bold:bg-header-background theme-bold:text-header-link"})]})})})},28463:(e,t,n)=>{n.r(t),n.d(t,{AIResponseFeedback:()=>u});var s=n(54568),l=n(88118),a=n(96021),r=n(98743),i=n(7620),o=n(24578),c=n(54217);function u(e){let{className:t,responseId:n,query:u}=e,d=(0,l.ok)(),[h,m]=(0,i.useState)(null),p=(0,o.jt)(),x=e=>{m(e),p({type:"ask_rate_response",query:u,responseId:n,rating:e})};return(0,s.jsxs)("div",{className:(0,r.P)("flex h-fit animate-[heightIn_.5s_ease_both] items-center",t),children:[(0,s.jsx)(c.$n,{icon:"thumbs-up",iconOnly:!0,label:(0,a.s)(d,"was_this_helpful_positive_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==h&&1!==h&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDelay:".5s",animationDuration:".5s"},onClick:()=>x(1),disabled:null!==h,active:1===h},"positive"),(0,s.jsx)(c.$n,{icon:"thumbs-down",iconOnly:!0,label:(0,a.s)(d,"was_this_helpful_negative_label"),variant:"blank",className:(0,r.P)("animate-fade-in overflow-hidden text-tint-subtle transition-all",null!==h&&-1!==h&&"px-0 text-[0rem] opacity-0"),size:"medium",style:{animationDelay:".7s",animationDuration:".5s"},onClick:()=>x(-1),disabled:null!==h,active:-1===h},"negative"),null!==h?(0,s.jsx)("span",{className:"ml-2 animate-blur-in-slow text-tint-subtle",style:{animationDelay:".5s"},children:(0,a.t)(d,"was_this_helpful_thank_you")}):null]})}},30711:(e,t,n)=>{n.r(t),n.d(t,{ThemeToggler:()=>o});var s=n(54568),l=n(68309),a=n(7620),r=n(88118),i=n(54217);function o(){let e=(0,r.ok)(),[t,n]=a.useState(!1),{theme:o,setTheme:u}=(0,l.D)();a.useEffect(()=>{n(!0)},[]);let d=e=>{u(e)};return(0,s.jsxs)(i.e2,{role:"radiogroup",className:"gap-2",combinedShape:!1,children:[(0,s.jsx)(c,{active:t&&"light"===o,icon:"sun-bright",onClick:()=>d("light"),title:(0,r.si)(e,"switch_to_light_theme")}),(0,s.jsx)(c,{active:t&&"system"===o,icon:"desktop",onClick:()=>d("system"),title:(0,r.si)(e,"switch_to_system_theme")}),(0,s.jsx)(c,{active:t&&"dark"===o,icon:"moon",onClick:()=>d("dark"),title:(0,r.si)(e,"switch_to_dark_theme")})]})}function c(e){let{icon:t,onClick:n,title:l,active:a}=e;return(0,s.jsx)(i.$n,{type:"button",role:"radio",onClick:n,label:l,"aria-checked":a,variant:"blank",size:"default",className:a?"bg-primary theme-muted:bg-primary-hover text-primary-strong ring-primary hover:bg-primary contrast-more:text-primary-strong contrast-more:ring-1 [html.sidebar-filled.theme-bold.tint_&]:bg-primary-hover":"",icon:t,iconOnly:!0})}},38305:(e,t,n)=>{n.r(t),n.d(t,{AIChat:()=>j,AIChatBody:()=>C,AIChatDynamicIcon:()=>w,AIChatSubtitle:()=>_,getAIChatName:()=>S});var s=n(54568),l=n(88118),a=n(98743),r=n(82745),i=n(7620),o=n(58541),c=n(55809),u=n(75742),d=n(24578),h=n(62574),m=n(54217),p=n(66929),x=n(60544),f=n(73598),g=n(40195),v=n(85598);function b(e){let{value:t,onChange:n,onSubmit:c,disabled:u,loading:d}=e,h=(0,l.ok)(),p=(0,g.useAIChatState)(),x=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(p.opened&&!u&&!d){let e=setTimeout(()=>{var e;null==(e=x.current)||e.focus()},150);return()=>clearTimeout(e)}},[u,d,p.opened]),(0,o.vC)("mod+i",e=>{var t;e.preventDefault(),null==(t=x.current)||t.focus()},{enableOnFormTags:!0}),(0,s.jsxs)("div",{className:"depth-subtle:has-[textarea:focus]:-translate-y-px relative flex animate-blur-in-slow flex-col overflow-hidden circular-corners:rounded-3xl rounded-corners:rounded-xl bg-tint-base/9 depth-subtle:shadow-sm shadow-tint/6 ring-1 ring-tint-subtle backdrop-blur-lg transition-all depth-subtle:has-[textarea:focus]:shadow-lg has-[textarea:focus]:shadow-primary-subtle has-[textarea:focus]:ring-2 has-[textarea:focus]:ring-primary-hover contrast-more:bg-tint-base dark:shadow-tint-1",children:[(0,s.jsx)("textarea",{ref:x,disabled:u||d,"data-loading":d,"data-testid":"ai-chat-input",className:(0,a.P)("resize-none","focus:outline-hidden","focus:ring-0","w-full","px-3","py-3","pb-12","h-auto","bg-transparent","peer","max-h-64","placeholder:text-tint/8","transition-colors","disabled:bg-tint-subtle","delay-300","disabled:delay-0","disabled:cursor-not-allowed","data-[loading=true]:cursor-progress","data-[loading=true]:opacity-50"),value:t,rows:1,placeholder:(0,l.si)(h,"ai_chat_input_placeholder"),onChange:e=>{let t=e.currentTarget;n(t.value),t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")},onKeyDown:e=>{if("Escape"===e.key){e.preventDefault(),e.currentTarget.blur();return}"Enter"===e.key&&!e.shiftKey&&t.trim()&&(e.preventDefault(),e.currentTarget.style.height="auto",c(t))}}),u?null:(0,s.jsx)("div",{className:"absolute top-2.5 right-3 animate-[fadeIn_0.2s_0.5s_ease-in-out_both] peer-focus:hidden",children:(0,s.jsx)(v.S,{keys:["mod","i"],className:"bg-tint-base"})}),(0,s.jsxs)("div",{className:"absolute inset-x-0 bottom-0 flex items-center gap-2 px-2 py-2",children:[(0,s.jsxs)(m.z8,{openDelay:500,children:[(0,s.jsx)(m.jc,{className:"max-w-xs bg-tint p-2 text-sm text-tint",arrow:{className:"fill-tint-3"},children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 p-2",children:[(0,s.jsx)("p",{className:"font-semibold",children:(0,l.t)(h,"ai_chat_context_description")}),(0,s.jsxs)("ul",{className:"flex flex-col gap-2",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Icon,{icon:"memo",className:"size-3.5 opacity-7"}),(0,l.t)(h,"ai_chat_context_pages_youve_read")]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Icon,{icon:"user",className:"size-3.5 opacity-7"}),(0,l.t)(h,"ai_chat_context_info_provided_by_the_site")]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Icon,{icon:"message-question",className:"size-3.5 opacity-7"}),(0,l.t)(h,"ai_chat_context_previous_messages")]})]}),(0,s.jsx)("p",{children:(0,l.t)(h,"ai_chat_context_disclaimer")})]})}),(0,s.jsx)(m.d0,{children:(0,s.jsxs)("div",{className:"flex cursor-help items-center gap-1 circular-corners:rounded-2xl rounded-corners:rounded-md px-2.5 py-1.5 text-tint/7 text-xs transition-all hover:bg-tint",children:[(0,s.jsx)("span",{className:"-ml-1 circular-corners:rounded-2xl rounded-corners:rounded-sm bg-tint-11/7 px-1 py-0.5 font-mono font-semibold text-[0.65rem] text-contrast-tint-11 leading-none",children:(0,l.t)(h,"ai_chat_context_badge")})," ",(0,s.jsx)("span",{className:"leading-none",children:(0,l.t)(h,"ai_chat_context_title")}),(0,s.jsx)(r.Icon,{icon:"question-circle",className:"size-3 shrink-0"})]})})]}),(0,s.jsx)(m.$n,{label:(0,l.si)(h,"send"),size:"medium",className:"ml-auto",disabled:u||!t.trim(),onClick:()=>c(t)})]})]})}var y=n(78700);function k(e){let t=(0,l.ok)(),{chatController:n,suggestions:a}=e,r=a&&a.length>0?a:[(0,l.si)(t,"ai_chat_suggested_questions_about_this_page"),(0,l.si)(t,"ai_chat_suggested_questions_read_next"),(0,l.si)(t,"ai_chat_suggested_questions_example")];return(0,s.jsx)("div",{className:"flex flex-col items-start gap-2 self-start",children:r.map((e,t)=>(0,s.jsx)(m.$n,{variant:"blank",size:"medium",className:"max-w-full animate-blur-in-slow border-none bg-primary-solid/1 px-3 py-1.5 hover:bg-primary-hover",style:{animationDelay:"".concat(1e3+100*t,"ms")},onClick:()=>n.postMessage({message:e}),children:e},e))})}function j(){let{config:e}=(0,c.OD)(),t=(0,l.ok)(),n=(0,c.J4)(),r=(0,c.C8)(),h=i.useRef(null);i.useEffect(()=>{if(n.opened){var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth",block:"start"})}},[n.opened]),(0,o.vC)("esc",()=>{r.close()},[]);let p=(0,d.jt)();return i.useEffect(()=>{n.opened&&p({type:"ask_view"})},[n.opened,p]),(0,s.jsx)("div",{"data-testid":"ai-chat",className:(0,a.P)("ai-chat inset-y-0 right-0 z-40 mx-auto flex max-w-3xl scroll-mt-36 px-4 py-4 transition-[width,opacity,margin,display] transition-discrete duration-300 sm:px-6 lg:fixed lg:w-80 lg:p-0 xl:w-96",n.opened?"lg:starting:ml-0 lg:starting:w-0 lg:starting:opacity-0":"hidden lg:ml-0 lg:w-0! lg:opacity-0"),children:(0,s.jsx)(u.VN,{className:"relative shrink-0 border-tint-subtle border-l to-tint-base transition-all duration-300 max-lg:circular-corners:rounded-3xl max-lg:rounded-corners:rounded-md max-lg:border lg:w-80 xl:w-96",children:(0,s.jsxs)(u.ES,{children:[(0,s.jsxs)(u.Ac,{children:[(0,s.jsx)(w,{trademark:e.trademark}),(0,s.jsxs)(u.Do,{children:[(0,s.jsx)(u.tP,{children:S(t,e.trademark)}),(0,s.jsx)(_,{chat:n})]}),(0,s.jsxs)(u.a8,{children:[(0,s.jsx)(x.AIChatControlButton,{}),(0,s.jsx)(m.$n,{onClick:()=>r.close(),iconOnly:!0,icon:"close",label:(0,l.si)(t,"close"),variant:"blank",size:"default"})]})]}),(0,s.jsx)(u.XO,{children:(0,s.jsx)(C,{chatController:r,chat:n,suggestions:e.suggestions})})]})})})}function w(e){var t;let{trademark:n,className:l}=e,r=(0,c.J4)();return(0,s.jsx)(f.y,{className:(0,a.P)("size-5 text-tint",l),trademark:n,state:r.error?"error":r.loading?(null==(t=r.messages[r.messages.length-1])?void 0:t.content)?"working":"thinking":r.messages.length>0?r.pendingTools.length>0?"confirm":"done":"default"})}function _(e){var t,n;let{chat:r}=e,i=(0,l.ok)();return(0,s.jsxs)(u.bY,{className:(0,a.P)("relative",r.loading?"h-3 opacity-11":"h-0 opacity-0"),children:[(0,s.jsx)("span",{className:(0,a.P)("absolute left-0",r.loading?(null==(t=r.messages[r.messages.length-1])?void 0:t.content)?"animate-blur-in-slow":"hidden":"animate-blur-out-slow"),children:(0,l.t)(i,"ai_chat_working")}),(0,s.jsx)("span",{className:(0,a.P)("absolute left-0",r.loading?(null==(n=r.messages[r.messages.length-1])?void 0:n.content)?"animate-blur-out-slow":"animate-blur-in-slow":"hidden"),children:(0,l.t)(i,"ai_chat_thinking")})]})}function C(e){let{chatController:t,chat:n,suggestions:a,greeting:r}=e,{trademark:o}=(0,c.OD)().config,[u,d]=i.useState(""),m=(0,l.ok)(),x=(0,h.cB)(36e5),g=!n.messages.length,v=i.useMemo(()=>{let e=new Date(x).getHours();return e<6?(0,l.si)(m,"ai_chat_assistant_greeting_night"):e<12?(0,l.si)(m,"ai_chat_assistant_greeting_morning"):e<18?(0,l.si)(m,"ai_chat_assistant_greeting_afternoon"):(0,l.si)(m,"ai_chat_assistant_greeting_evening")},[x,m]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.ScrollContainer,{className:"shrink grow basis-80 animate-fade-in-slow [container-type:size]",contentClassName:"p-4 gutter-stable flex flex-col gap-4",orientation:"vertical",fadeEdges:["leading"],active:"message-group-".concat(n.messages.filter(e=>"user"===e.role).length-1),children:g?(0,s.jsxs)("div",{className:"flex grow flex-col",children:[(0,s.jsxs)("div",{className:"my-auto flex flex-row items-center gap-4 pb-6 [@container(min-height:400px)]:flex-col",children:[(0,s.jsx)("div",{className:"flex size-16 shrink-0 animate-scale-in items-center justify-center rounded-full bg-primary-solid/1 [@container(min-height:400px)]:size-32",style:{animationDelay:".3s"},children:(0,s.jsx)(f.y,{state:"intro",trademark:o,className:"size-8 text-primary [@container(min-height:400px)]:size-16"})}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-1 [@container(min-height:400px)]:items-center",children:[(0,s.jsx)("h5",{className:"animate-blur-in-slow font-bold text-lg text-tint-strong leading-tight [@container(min-height:400px)]:text-center",style:{animationDelay:".5s"},"data-testid":"ai-chat-time-greeting",children:(null==r?void 0:r.title)||v}),(0,s.jsx)("p",{className:"animate-blur-in-slow text-tint leading-tight [@container(min-height:400px)]:text-center",style:{animationDelay:".6s"},children:(null==r?void 0:r.subtitle)||(0,l.t)(m,"ai_chat_assistant_description")})]})]}),n.error?null:(0,s.jsx)(k,{chatController:t,suggestions:a})]}):(0,s.jsx)(y.t,{chat:n,chatController:t})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 px-4 pb-4",children:[n.error?(0,s.jsx)(N,{chatController:t}):null,(0,s.jsx)(b,{value:u,onChange:d,loading:n.loading,disabled:n.loading||n.error,onSubmit:()=>{t.postMessage({message:u}),d("")}})]})]})}function N(e){let t=(0,l.ok)(),{chatController:n}=e;return(0,s.jsxs)("div",{className:"flex animate-scale-in flex-wrap justify-between gap-2 circular-corners:rounded-2xl rounded-corners:rounded-md bg-danger px-3 py-2 text-danger text-sm ring-1 ring-danger",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Icon,{icon:"exclamation-triangle",className:"size-3.5"}),(0,s.jsx)("span",{className:"flex items-center gap-1",children:(0,l.t)(t,"ai_chat_error")})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(m.$n,{variant:"blank",size:"small",icon:"refresh",label:(0,l.si)(t,"unexpected_error_retry"),onClick:()=>{n.clear()},className:"text-danger! hover:bg-danger-5"})})]})}function S(e,t){return t?(0,l.si)(e,"ai_chat_assistant_name"):(0,l.si)(e,"ai_chat_assistant_name_unbranded")}},40195:(e,t,n)=>{n.r(t),n.d(t,{AIChatProvider:()=>b,useAIChatController:()=>y,useAIChatState:()=>g});var s=n(54568),l=n(13368),a=n(88118),r=n(96021),i=n(5772),o=n(7620),c=n(24578),u=n(89608),d=n(54223),h=n(25316);let m=(0,h.createServerReference)("40b0b04aee97bdf45ce27373b59b59466abe85b9ee",h.callServer,void 0,h.findSourceMapURL,"streamAIChatResponse");var p=n(62574);let x=o.createContext(null),f=l.v(()=>({opened:!1,responseId:null,messages:[],query:null,followUpSuggestions:[],pendingTools:[],loading:!1,error:!1,initialQuery:null}));function g(){return l.P(f)}function v(e,t){e&&setTimeout(()=>{e.forEach(e=>e(t))},0)}function b(e){let{renderMessageOptions:t,children:n}=e,l=function(){let e=function(){let e=(0,p.aP)();return o.useMemo(()=>({location:e?{spaceId:e.spaceId,pageId:e.pageId}:void 0}),[e])}(),t=o.useRef(e);return o.useEffect(()=>{t.current=e},[e]),t}(),h=(0,c.jt)(),[,g]=(0,d.SQ)(),b=(0,a.ok)(),y=o.useRef(new Map),k=o.useCallback(()=>{let{initialQuery:e}=f.getState();f.setState(e=>({...e,opened:!0})),g(t=>{var n,s,l,a;return{ask:null!=(s=null!=(n=null==t?void 0:t.ask)?n:e)?s:"",query:null!=(l=null==t?void 0:t.query)?l:null,scope:null!=(a=null==t?void 0:t.scope)?a:"default",open:!1}}),v(y.current.get("open"),{})},[g]),j=o.useCallback(()=>{f.setState(e=>({...e,opened:!1})),g(e=>{var t,n;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}}),v(y.current.get("close"),{})},[g]),w=o.useCallback(async e=>{f.setState(e=>({...e,followUpSuggestions:[],pendingTools:[],loading:!0,error:!1,messages:[...e.messages,{role:i.W7K.Assistant,content:null}]}));let n=async e=>{let t=u.By.getState().tools.find(t=>t.name===e.toolCall.tool);if(!t)throw Error("Tool ".concat(e.toolCall.tool," not found"));try{let n=await t.execute(e.toolCall.input);w({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:n.output,summary:n.summary}})}catch(t){w({toolCall:{tool:e.toolCall.tool,toolCallId:e.toolCallId,output:{error:t instanceof Error?t.message:"Unknown error"},summary:{icon:"bomb",text:"An error occurred while executing the tool"}}})}},s=null;try{var a,o,c,d;let h=u.By.getState().tools;for await(let u of(await m({message:e.message,toolCall:e.toolCall,messageContext:l.current,previousResponseId:null!=(a=f.getState().responseId)?a:void 0,tools:h.map(e=>({name:e.name,description:e.description,inputSchema:e.inputSchema})),options:{withLinkPreviews:null==(o=null==t?void 0:t.withLinkPreviews)||o,withToolCalls:null==(c=null==t?void 0:t.withToolCalls)||c,asEmbeddable:null!=(d=null==t?void 0:t.asEmbeddable)&&d}}))){if(!u)continue;if(e.message&&f.getState().query!==e.message)break;let t=u.event;switch(t.type){case"response_finish":f.setState(e=>({...e,responseId:t.responseId,loading:!1,error:!1}));break;case"response_followup_suggestion":f.setState(e=>({...e,followUpSuggestions:[...e.followUpSuggestions,...t.suggestions]}));break;case"response_tool_call_pending":{let e=h.find(e=>e.name===t.toolCall.tool);if(!e)throw Error("Tool ".concat(t.toolCall.tool," not found"));let l=e.confirmation;l?f.setState(e=>({...e,pendingTools:[...e.pendingTools,{icon:l.icon,label:l.label,cancelToolCall:{tool:t.toolCall.tool,toolCallId:t.toolCallId,output:{cancelled:"User did not confirm the tool call"},summary:{icon:"forward",text:(0,r.s)(b,"tool_call_skipped",l.label)}},confirm:async()=>{await n(t)}}]})):s=t}}f.setState(e=>({...e,messages:[...e.messages.slice(0,-1),{role:i.W7K.Assistant,content:u.content}]}))}s&&await n(s),f.setState(e=>({...e,loading:!1,error:!1}))}catch(e){console.error("Error streaming AI response",e),f.setState(e=>({...e,loading:!1,error:!0}))}},[l.current,null==t?void 0:t.withLinkPreviews,null==t?void 0:t.withToolCalls,null==t?void 0:t.asEmbeddable,b]),_=o.useCallback(async e=>{let{query:t,messages:n,pendingTools:s}=f.getState();if(0===n.length&&g(t=>{var n,s;return{ask:e.message,query:null!=(n=null==t?void 0:t.query)?n:null,scope:null!=(s=null==t?void 0:t.scope)?s:"default",open:!1}}),v(y.current.get("postMessage"),{message:e.message}),t===e.message)return void f.setState(e=>({...e,opened:!0}));h({type:"ask_question",query:e.message}),f.setState(t=>{var n;return{...t,messages:[...t.messages,{role:i.W7K.User,content:e.message,query:e.message}],query:e.message,followUpSuggestions:[],loading:!0,error:!1,initialQuery:null!=(n=t.initialQuery)?n:e.message}});let l=s[0];w({message:e.message,...l?{toolCall:l.cancelToolCall}:{}})},[g,h,w]),C=o.useCallback(()=>{f.setState(e=>({opened:e.opened,loading:!1,messages:[],query:null,followUpSuggestions:[],pendingTools:[],responseId:null,error:!1,initialQuery:null})),g(e=>{var t,n;return{ask:"",query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}})},[g]),N=o.useCallback((e,t)=>{let n=y.current.get(e)||[];return n.push(t),y.current.set(e,n),()=>{let n=y.current.get(e)||[];y.current.set(e,n.filter(e=>e!==t))}},[]),S=o.useMemo(()=>({open:k,close:j,clear:C,postMessage:_,on:N}),[k,j,C,_,N]);return(0,s.jsx)(x.Provider,{value:S,children:n})}function y(){let e=o.useContext(x);if(!e)throw Error("useAIChatController must be used within an AIChatProvider");return e}},54223:(e,t,n)=>{n.d(t,{Lt:()=>s.SearchContextProvider,SQ:()=>s.useSearch}),n(27143),n(55500);var s=n(21566)},55500:(e,t,n)=>{n.r(t),n.d(t,{SearchContainer:()=>V});var s=n(54568),l=n(88118),a=n(5772),r=n(62942),i=n(7620),o=n(58541),c=n(55809),u=n(99507),d=n(24578),h=n(1224),m=n(54217),p=n(96021),x=n(98743),f=n(82745),g=n(65938),v=n(78700);let b=(0,i.createContext)(void 0);function y(e){let{children:t,value:n}=e;return(0,s.jsx)(b.Provider,{value:n,children:t})}var k=n(25316);let j=(0,k.createServerReference)("402da1a34a6146ed0d420a87c9e14435e94b6d1d27",k.callServer,void 0,k.findSourceMapURL,"streamAskQuestion");var w=n(21566);function _(e){let{query:t}=e,n=(0,l.ok)(),a=(0,d.jt)(),[r,o]=function(){let e=(0,i.useContext)(b);if(!e)throw Error("SearchAskContext is not available");return e}();i.useEffect(()=>{let e=!1;return o({type:"loading"}),(async()=>{a({type:"ask_question",query:t});let{stream:n}=await j({question:t});for await(let t of(0,g.S7)(n)){if(e)return;t&&o({type:"answer",answer:t})}})().catch(()=>{e||o({type:"error"})}),()=>{e=!0}},[t,o,a]),i.useEffect(()=>()=>{o(null)},[o]);let c=(0,s.jsxs)("div",{className:"flex grow flex-col items-center justify-center",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(u.ur,{state:"thinking",className:"size-6 text-tint/6"})}),(0,s.jsx)(v.h,{breakLines:!0,className:"text-center"})]});return(0,s.jsxs)("div",{className:"flex min-h-full p-4",children:[(null==r?void 0:r.type)==="answer"?(0,s.jsx)(i.Suspense,{fallback:c,children:(0,s.jsx)(C,{answer:r.answer,placeholder:c,query:t})}):null,(null==r?void 0:r.type)==="error"?(0,s.jsx)("div",{className:"grow p-4 text-center",children:(0,p.t)(n,"search_ask_error")}):null,(null==r?void 0:r.type)==="loading"?c:null]})}function C(e){let{query:t,answer:n,placeholder:a}=e,[r,o]=i.useState(null),[c,d]=i.useTransition();i.useEffect(()=>{d(()=>{o(n)})},[n]);let h=(0,l.ok)(),[,f]=(0,w.useSearch)();return r?(0,s.jsxs)("div",{className:(0,x.P)("flex w-full flex-col gap-4"),children:[(0,s.jsxs)("div",{className:"-mt-2 -mr-2 relative flex items-center gap-2",children:[(0,s.jsx)(m.$n,{icon:"chevron-left",variant:"blank",iconOnly:!0,label:(0,p.s)(h,"search_back"),className:"-ml-2 starting:-mr-2 starting:ml-0 starting:w-0 starting:px-0 starting:opacity-0 transition-[all,margin,padding,width,opacity] transition-discrete delay-[0s,2s,2s,2s,2.5s] duration-[.3s,1s,1s,1s,.5s]",onClick:()=>{f(e=>e?{...e,query:e.ask,ask:null}:null)}}),(0,s.jsx)(u.ur,{state:"intro",className:"size-4 text-tint/6"}),(0,s.jsx)("span",{className:"animate-[fadeIn_1s_.5s_both] font-semibold text-tint",children:(0,p.t)(h,"ai_answer")})]}),(0,s.jsx)(N,{query:t,answer:r})]}):(0,s.jsx)(s.Fragment,{children:a})}function N(e){var t;let{query:n,answer:a}=e,r=(0,l.ok)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{"data-testid":"search-ask-answer",className:"animate-fade-in-slow text-tint-strong",children:[null!=(t=a.body)?t:(0,p.t)(r,"search_ask_no_answer"),a.sources.length>0?(0,s.jsx)(u.ph,{query:n,className:"-ml-1 mt-2",responseId:""}):null,a.followupQuestions.length>0?(0,s.jsx)(S,{followupQuestions:a.followupQuestions}):null]}),a.sources.length>0?(0,s.jsx)(I,{sources:a.sources,language:r,hasAnswer:!!a.body}):null]})}function S(e){let{followupQuestions:t}=e,n=(0,w.useSearchLink)();return(0,s.jsx)("div",{className:(0,x.P)("flex","flex-col","flex-wrap","mt-4","animate-[heightIn_.5s_ease_both]"),children:t.map(e=>(0,s.jsxs)(m.N_,{className:(0,x.P)("flex","items-center","gap-2","px-4","-mx-4","py-2","rounded-sm","straight-corners:rounded-none","circular-corners:rounded-full","text-tint","hover:bg-tint-hover","focus-within:bg-tint-hover"),...n({ask:e,open:!0}),children:[(0,s.jsx)(f.Icon,{icon:"magnifying-glass",className:(0,x.P)("size-4","shrink-0","mr-2","text-tint-subtle")}),(0,s.jsx)("span",{children:e})]},e))})}function I(e){let{sources:t,language:n,hasAnswer:l}=e;return(0,s.jsxs)("div",{className:(0,x.P)("flex","flex-wrap","gap-2","mt-4","sm:mt-6","pt-4","border-t","border-subtle"),children:[(0,s.jsx)("span",{children:(0,p.t)(n,l?"search_ask_sources":"search_ask_sources_no_answer")}),t.map(e=>(0,s.jsx)("span",{className:(0,x.P)(),children:(0,s.jsxs)(m.N_,{className:(0,x.P)("flex","flex-wrap","gap-1","items-center","text-tint","hover:underline","links-accent:decoration-[3px]","links-accent:underline-offset-4","focus-within:text-primary"),href:e.href,children:[(0,s.jsx)(f.Icon,{icon:"arrow-up-right",className:(0,x.P)("text-tint-subtle","size-4","shrink-0")}),e.title]})},e.id))]})}var q=n(27143),L=n(64824);function z(e){var t;let{query:n,text:l,highlight:a=["-z-1","relative","text-bold","bg-primary","text-contrast-primary","px-0.5","-mx-0.5","py-0.5","rounded-sm","straight-corners:rounded-xs","transition-colors","group-hover:bg-primary-active","group-hover:text-contrast-primary-active","group-[.is-active]:bg-primary-active","group-[.is-active]:text-contrast-primary-active"]}=e,r=(t=l,n.toLowerCase().split(" ").reduce((e,t)=>{var n,s;return n=e,s=t,n.reduce((e,t)=>{if(t.match)return e.push(t),e;let{text:n}=t,l=n.toLowerCase().indexOf(s);if(l>=0){let t=n.slice(0,l),a=n.slice(l,l+s.length),r=n.slice(l+s.length);return t.length>0&&e.push({text:t}),a.length>0&&e.push({text:a,match:s}),r.length>0&&e.push({text:r}),e}return e.push({text:n}),e},[])},[{text:t}]));return(0,s.jsx)("span",{className:(0,x.P)("relative z-2 whitespace-break-spaces"),children:r.map((e,t)=>(0,s.jsx)("span",{className:(0,x.P)(e.match?a:null),children:e.text},t))})}var P=n(20255);let A=i.forwardRef(function(e,t){let{children:n,href:l,active:a,className:r,leadingIcon:i,size:o="medium",action:c,...u}=e;return(0,s.jsxs)(P.Link,{ref:t,href:l,className:(0,x.P)("flex","items-center","gap-3","group","px-4","small"===o?"py-1.5":"py-3","text-tint","hover:bg-tint","hover:text-tint-strong","group","transition-colors","rounded-corners:rounded-md","circular-corners:rounded-2xl",a?["is-active","bg-primary","text-primary-strong","hover:bg-primary"]:null,r),role:"option",...u,children:[(0,s.jsx)("div",{className:"size-4 shrink-0 text-tint-subtle",children:"string"==typeof i?(0,s.jsx)(f.Icon,{icon:i,className:"size-4"}):i}),(0,s.jsx)("div",{className:"grow",children:n}),a?(0,s.jsx)(m.$n,{label:c,iconOnly:!0,variant:"primary",icon:"arrow-turn-down-left"}):(0,s.jsx)("div",{className:"flex size-8 shrink-0 items-center justify-center text-tint-subtle",children:(0,s.jsx)(f.Icon,{icon:"chevron-right",className:"size-3"})})]})}),E=i.forwardRef(function(e,t){var n,a;let{query:r,item:o,active:c,...u}=e,d=(0,l.ok)(),h=null!=(a=null==(n=o.breadcrumbs)?void 0:n.map(e=>(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[e.icon?(0,s.jsx)(f.Icon,{className:"size-3",icon:e.icon}):null,e.label]},e.label)))?a:[];return(0,s.jsxs)(A,{ref:t,href:o.href,active:c,"data-testid":"search-page-result",action:(0,l.si)(d,"view"),leadingIcon:(0,s.jsx)(f.Icon,{icon:"memo",className:"size-4"}),insights:{type:"search_open_result",query:r,result:{pageId:o.pageId,spaceId:o.spaceId}},"aria-label":(0,l.si)(d,"search_page_result_title",o.title),...u,children:[h.length>0?(0,s.jsx)("div",{className:(0,x.P)("text-xs","text-tint/7","contrast-more:text-tint","group-[.is-active]:text-tint","transition-colors","font-normal","uppercase","leading-snug","tracking-wider","mb-1","flex","flex-wrap","gap-x-2","gap-y-0","items-center"),children:(h.length>3?[...h.slice(0,2),(0,s.jsx)(f.Icon,{icon:"ellipsis-h",className:"size-3"},"ellipsis"),...h.slice(-1)]:h).map((e,t)=>(0,s.jsxs)(i.Fragment,{children:[0!==t?(0,s.jsx)(f.Icon,{icon:"chevron-right",className:"size-2"},"".concat(e.key,"-icon")):null,(0,s.jsx)("span",{className:"line-clamp-1",children:e})]},t))}):null,(0,s.jsx)("p",{className:"line-clamp-2 font-semibold text-base text-tint-strong leading-snug",children:(0,s.jsx)(z,{query:r,text:o.title})})]})}),D=i.forwardRef(function(e,t){let{question:n,recommended:a=!1,active:r,assistant:i,...o}=e,c=(0,l.ok)(),u=(0,w.useSearchLink)();return(0,s.jsx)(A,{size:a?"small":"medium",action:(0,l.si)(c,"ask",""),ref:t,"data-testid":a?"search-recommended-question":"search-ask-question",scroll:!1,...u({ask:n,query:null,open:"search"===i.mode},()=>{i.open(n)}),active:r,leadingIcon:a?"search":i.icon,className:a?"pr-1.5":"",...o,children:a?n:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"font-semibold text-base text-tint-strong leading-tight",children:(0,l.t)(c,"search_ask",[n])}),(0,s.jsx)("div",{className:"text-sm text-tint-subtle",children:(0,l.t)(c,"search_ask_description",i.label)})]})})}),M=i.forwardRef(function(e,t){let{query:n,item:a,active:r,...i}=e,o=(0,l.ok)();return(0,s.jsx)(A,{ref:t,href:a.href,size:"small",active:r,action:(0,l.si)(o,"view"),"data-testid":"search-page-section-result",insights:{type:"search_open_result",query:n,result:{pageId:a.pageId,spaceId:a.spaceId}},"aria-label":a.title?(0,l.si)(o,"search_section_result_title",a.title):a.body?(0,l.si)(o,"search_section_result_content",function(e,t){let n=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return n<20?e.slice(0,100):"…".concat(e.slice(n-10,n+t.length+30),"…")}(a.body,n)):(0,l.si)(o,"search_section_result_default"),...i,children:(0,s.jsxs)("div",{className:"grow border-tint-subtle border-l-2 pl-4",children:[a.title?(0,s.jsx)("p",{className:"font-semibold",children:(0,s.jsx)(z,{query:n,text:a.title})}):null,a.body?function(e,t){let n=e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());return(0,s.jsx)("p",{className:"wrap-anywhere relative line-clamp-3 text-sm",children:(0,s.jsx)(z,{query:t,text:n<20?e:"…".concat(e.slice(n-10))})})}(a.body,n):null]})})}),T=i.forwardRef(function(e,t){let{children:n,id:a,query:r,results:o,fetching:u,cursor:d,error:h}=e,p=(0,l.ok)(),f=i.useRef([]);i.useEffect(()=>{var e;null!==d&&f.current[d]&&(null==(e=f.current[d])||e.scrollIntoView({block:"nearest",inline:"nearest"}))},[d]);let g=i.useCallback(()=>{var e;null!==d&&f.current[d]&&(null==(e=f.current[d])||e.click())},[d]);i.useImperativeHandle(t,()=>({select:g}),[g]);let{assistants:v}=(0,c.OD)();if(u)return(0,s.jsx)("div",{className:(0,x.P)("flex","items-center","justify-center","py-8","h-full"),children:(0,s.jsx)(m.Rh,{className:(0,x.P)("w-6","text-tint/6")})});if(h)return(0,s.jsxs)("div",{className:(0,x.P)("flex","flex-col","items-center","justify-center","text-center","py-8","h-full","gap-4"),children:[(0,s.jsx)("div",{children:(0,l.t)(p,"search_ask_error")}),(0,s.jsx)(m.$n,{variant:"secondary",size:"small",onClick:()=>window.location.reload(),children:(0,l.t)(p,"unexpected_error_retry")})]});let b=(0,s.jsx)("div",{className:(0,x.P)("flex","items-center","justify-center","text-center","py-8","h-full"),children:(0,l.t)(p,"search_no_results_for",r)});return(0,s.jsxs)("div",{className:(0,x.P)("min-h-full"),children:[n,0===o.length?r?b:(0,s.jsx)("div",{className:"empty"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{"data-testid":"search-results",className:"flex flex-col gap-y-1",id:a,role:"listbox","aria-live":"polite",children:o.map((e,t)=>{let n={"aria-posinset":t+1,"aria-setsize":o.length,id:"".concat(a,"-").concat(t)};switch(e.type){case"page":return(0,s.jsx)(E,{ref:e=>{f.current[t]=e},query:r,item:e,active:t===d,...n},e.id);case"question":return(0,s.jsx)(D,{ref:e=>{f.current[t]=e},question:r,active:t===d,assistant:e.assistant,...n},e.id);case"recommended-question":return(0,s.jsx)(D,{ref:e=>{f.current[t]=e},question:e.question,active:t===d,assistant:v[0],recommended:!0,...n},e.id);case"section":return(0,s.jsx)(M,{ref:e=>{f.current[t]=e},query:r,item:e,active:t===d,...n},e.id);default:(0,L.default)(e)}})}),!o.some(e=>"question"!==e.type)&&b]})]})});function R(e){let{withVariants:t,withSections:n}=e,[a]=(0,w.useSearch)(),r=(0,l.ok)();if(!a)return null;let i=["default","all"].includes(a.scope),o=["extended","all"].includes(a.scope);return(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"mr-1",children:(0,l.t)(r,"search_scope_title")}),n?(0,s.jsx)(O,{isExtended:i,...e}):null,!t||n&&i?null:(0,s.jsx)(U,{isExtended:o,...e})]})}function O(e){var t,n,a;let{isExtended:r,section:i}=e,o=(0,l.ok)(),[,c]=(0,w.useSearch)();return(0,s.jsxs)(m.rI,{button:(0,s.jsx)(m.$n,{variant:"blank",size:"medium",className:"px-2 text-tint-strong",icon:r||null==i?void 0:i.icon,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.t)(o,r?"search_scope_section_all":"search_scope_section_current",null!=(t=null==i?void 0:i.title)?t:""),(0,s.jsx)(m.ri,{})]})}),children:[(0,s.jsx)(m._2,{leadingIcon:"infinity",className:"gap-3",active:r,onClick:()=>c(e=>e?{...e,scope:"default"}:null),children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-tint-strong",children:(0,l.t)(o,"search_scope_section_all")}),(0,s.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,l.t)(o,"search_scope_section_all_description")})]})}),(0,s.jsx)(m._2,{leadingIcon:null!=(n=null==i?void 0:i.icon)?n:"crosshairs",className:"gap-3",active:!r,onClick:()=>c(e=>e?{...e,scope:"current"}:null),children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-tint-strong",children:(0,l.t)(o,"search_scope_section_current",null!=(a=null==i?void 0:i.title)?a:"")}),(0,s.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,l.t)(o,"search_scope_section_current_description")})]})})]})}function U(e){let{isExtended:t,spaceTitle:n,withSections:a}=e,r=(0,l.ok)(),[,i]=(0,w.useSearch)();return(0,s.jsxs)(m.rI,{button:(0,s.jsx)(m.$n,{variant:"blank",size:"medium",className:"px-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-tint-strong",children:(0,l.t)(r,t?"search_scope_variant_all":"search_scope_variant_current",null!=n?n:"")}),(0,s.jsx)(m.ri,{})]})}),children:[(0,s.jsx)(m._2,{className:"gap-3",active:!t,onClick:()=>i(e=>e?{...e,scope:a?"current":"default"}:null),children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-tint-strong",children:(0,l.t)(r,"search_scope_variant_current",null!=n?n:"")}),(0,s.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,l.t)(r,"search_scope_variant_current_description")})]})}),(0,s.jsx)(m._2,{className:"gap-3",active:t,onClick:()=>i(e=>e?{...e,scope:"extended"}:null),children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-tint-strong",children:(0,l.t)(r,"search_scope_variant_all")}),(0,s.jsx)("span",{className:"text-tint-subtle text-xs",children:(0,l.t)(r,"search_scope_variant_all_description")})]})})]})}var B=n(5047);let W=(0,k.createServerReference)("406b56653915653fe2b302bce28bcb3280a6d704d8",k.callServer,void 0,k.findSourceMapURL,"streamRecommendedQuestions"),F=(0,k.createServerReference)("407763c69b2ec4dbbd788e673b41114d362412f6ee",k.callServer,void 0,k.findSourceMapURL,"searchSiteContent"),$=new Set(["who","what","where","when","why","how","explain","is","are","was","were","do","does","did","which","whom","whose","can","have","give","tell","show","find"]),K=new Map;function V(e){var t,n,l,p,x,f,v,b,k,j;let{siteSpace:C,section:N,withVariants:S,withSiteVariants:I,withSections:z,style:P,className:A,viewport:E,siteSpaces:D}=e,{assistants:M,config:O}=(0,c.OD)(),[U,V]=(0,w.useSearch)(),H=function(){let[e,t]=(0,i.useState)(null);return(0,i.useMemo)(()=>[e,t],[e])}(),J=(0,r.useRouter)(),Y=(0,d.jt)(),Z=(0,i.useRef)(null),X=(0,i.useRef)(null),G=(0,h.a)(),ee=M.length>0,et=M.filter(e=>"search"===e.mode).length>0,en=i.useRef((null==U?void 0:U.ask)===void 0||(null==U?void 0:U.ask)===null);i.useEffect(()=>{var e,t;en.current||0===M.length||(null==U?void 0:U.ask)!==void 0&&(null==U?void 0:U.ask)!==null&&(en.current=!0,null==(e=M[0])||e.open(null!=(t=null==U?void 0:U.ask)?t:void 0))},[null==U?void 0:U.ask,M.length,null==(t=M[0])?void 0:t.open]);let es=i.useCallback(async e=>{V(e=>e?{...e,open:!1,query:""===e.query?null:e.query}:null),e&&J.push(e)},[V,J]);(0,o.vC)("mod+k",e=>{e.preventDefault(),el()},{enableOnFormTags:!0}),(0,o.vC)("mod+i",e=>{if(e.preventDefault(),M){var t;null==(t=M[0])||t.open()}},{enableOnFormTags:!0});let el=i.useCallback(()=>{null!=U&&U.open||(V(e=>{var t,n,s,l;return{ask:ee&&null!=(t=null==e?void 0:e.ask)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",query:null!=(l=null!=(s=null==e?void 0:e.query)?s:et||!ee?null==e?void 0:e.ask:null)?l:"",open:!0}}),Y({type:"search_open"}))},[null==U?void 0:U.open,V,Y,ee,et]);i.useEffect(()=>{let e=e=>{"Escape"===e.key&&es()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[es]);let ea=null!=(p=null==U||null==(n=U.query)?void 0:n.trim())?p:"",er=null!=(x=null==U||null==(l=U.ask)?void 0:l.trim())?x:"",ei=et&&er,eo="search-results-".concat(i.useId()),ec=i.useMemo(()=>D.reduce((e,t)=>(C.space.language&&t.space.language&&t.space.language!==C.space.language||e.push(t.id),e),[]),[D,C.space.language]),{results:eu,fetching:ed,error:eh}=function(e){let{disabled:t,query:n,siteSpaceId:s,siteSpaceIds:l,scope:a,suggestions:r}=e,o=(0,d.jt)(),[u,h]=i.useState({results:[],fetching:!1,error:!1}),{assistants:m}=(0,c.OD)(),p=m.length>0;return i.useEffect(()=>{if(t)return;if(!n){if(!p)return void h({results:[],fetching:!1,error:!1});if(K.has(s)){let e=K.get(s);(0,B.assert)(e,"Cached recommended questions should be set for site-space ".concat(s)),h({results:e,fetching:!1,error:!1});return}h({results:[],fetching:!1,error:!1});let e=!1,t=new Set,n=[];if(r&&r.length>0){r.forEach(e=>{t.add(e)}),h({results:r.map((e,t)=>({type:"recommended-question",id:"recommended-question-".concat(t),question:e})),fetching:!1,error:!1});return}let l=setTimeout(async()=>{if(e)return;let l=await W({siteSpaceId:s});for await(let a of(0,g.S7)(l.stream)){if(!a)continue;let{question:l}=a;!t.has(l)&&(t.add(l),n.push({type:"recommended-question",id:l,question:l}),K.set(s,n),e||h({results:[...n],fetching:!1,error:!1}))}},100);return()=>{e=!0,clearTimeout(l)}}h(e=>({results:e.results,fetching:!0,error:!1}));let e=!1,i=setTimeout(async()=>{try{let t=await (()=>{switch(a){case"all":return F({query:n,mode:"all"});case"default":return F({query:n,mode:"current",siteSpaceId:s});case"extended":return F({query:n,mode:"specific",siteSpaceIds:l});case"current":return F({query:n,mode:"specific",siteSpaceIds:[s]});default:(0,L.default)(a)}})();if(e)return;if(!t)return void h({results:[],fetching:!1,error:!0});let r=p?function(e,t,n){let s=e.filter(e=>"question"!==e.type);if(0===t.length)return s;let l=function(e){if(e.length>25||e.includes("?")||e.includes(" "))return!0;let t=e.toLowerCase().trim().split(/\s+/);if(0===t.length)return!1;for(let e of t)if($.has(e))return!0;return!1}(t);return[...l?[]:null!=s?s:[],...n.map((e,n)=>({type:"question",id:"question-".concat(n),query:t,assistant:e})),...l&&null!=s?s:[]]}(t,n,m):t;h({results:r,fetching:!1,error:!1}),o({type:"search_type_query",query:n})}catch(t){if(e)return;h({results:[],fetching:!1,error:!0})}},350);return()=>{e=!0,clearTimeout(i)}},[n,a,o,p,s,l,t,r]),u}({disabled:!((null==U?void 0:U.query)||ee),query:ea,siteSpaceId:C.id,siteSpaceIds:ec,scope:null!=(f=null==U?void 0:U.scope)?f:"default",withAI:ee,suggestions:O.suggestions}),em=null!=(b=null!=(v=null==U?void 0:U.query)?v:et||!ee?null==U?void 0:U.ask:null)?b:"",{cursor:ep,moveBy:ex}=function(e){let[t,n]=i.useState(null),{query:s,results:l}=e;i.useEffect(()=>{s||n(null)},[s]),i.useEffect(()=>{l.length>0&&n(0)},[l]);let a=i.useCallback(e=>{n(t=>null===t?0:Math.max(Math.min(t+e,l.length-1),0))},[l]);return{cursor:t,setCursor:n,moveBy:a}}({query:ea,results:eu});return(0,s.jsxs)(y,{value:H,children:[(0,s.jsx)(m.AM,{content:(null==U?void 0:U.query)||ee?(0,s.jsxs)(i.Suspense,{fallback:null,children:[(0,s.jsxs)("div",{className:"scroll-py-2 overflow-y-scroll p-2",children:[null===U||ei?null:(0,s.jsx)(T,{ref:Z,query:ea,id:eo,fetching:ed,results:eu,cursor:ep,error:eh}),ei?(0,s.jsx)(_,{query:er}):null]}),(S||z)&&!ei?(0,s.jsx)("div",{className:"border-tint-subtle border-t bg-tint-subtle px-4 py-1.5",children:(0,s.jsx)(R,{section:N,spaceTitle:C.title,withVariants:S,withSiteVariants:I,withSections:z})}):null]}):null,rootProps:{open:!!(("desktop"===E?!G:"mobile"!==E||G)&&null!=(k=null==U?void 0:U.open)&&k),modal:!1},contentProps:{onOpenAutoFocus:e=>e.preventDefault(),align:"start",className:"@container flex flex-col bg-tint-base has-[.empty]:hidden w-128 p-0 max-h-[min(32rem,var(--radix-popover-content-available-height))] max-w-[min(var(--radix-popover-content-available-width),32rem)]",onInteractOutside:e=>{var t;if(null==(t=X.current)?void 0:t.contains(e.target))return void e.preventDefault();es()},sideOffset:8,collisionPadding:{top:16,right:16,bottom:32,left:16},hideWhenDetached:!0},triggerProps:{asChild:!0},children:(0,s.jsx)(q.SearchInput,{ref:X,value:em,onFocus:el,onChange:e=>{V(t=>{var n,s;return{ask:ee&&!et&&null!=(n=null==t?void 0:t.ask)?n:null,query:e,scope:null!=(s=null==t?void 0:t.scope)?s:"default",open:!0}})},onKeyDown:e=>{if("ArrowUp"===e.key)e.preventDefault(),ex(-1);else if("ArrowDown"===e.key)e.preventDefault(),ex(1);else if("Enter"===e.key){var t;e.preventDefault(),null==(t=Z.current)||t.select()}},withAI:et,isOpen:null!=(j=null==U?void 0:U.open)&&j,className:A,"aria-controls":eo,"aria-activedescendant":null!==ep?"".concat(eo,"-").concat(ep):void 0,children:(0,s.jsx)(Q,{count:eu.length,showing:!!em&&!ed})})}),M.filter(e=>!0===e.ui).map((e,t)=>(0,s.jsx)(u.LN,{assistant:e,withShortcut:0===t,showLabel:1===M.filter(e=>!0===e.ui).length&&P===a.zK7.Prominent},e.id))]})}function Q(e){let{count:t,showing:n}=e,a=(0,l.ok)();return(0,s.jsx)("div",{className:"sr-only","aria-live":"assertive",role:"alert","aria-relevant":"all",children:n?t>0?(0,l.t)(a,"search_results_count",t):(0,l.t)(a,"search_no_results"):""})}},55809:(e,t,n)=>{n.d(t,{C8:()=>l.useAIChatController,J4:()=>l.useAIChatState,OD:()=>s.useAI});var s=n(97306),l=n(40195)},60101:(e,t,n)=>{n.r(t),n.d(t,{AIChatButton:()=>o});var s=n(54568),l=n(88118),a=n(96021),r=n(54217),i=n(85598);function o(e){let{assistant:t,showLabel:n=!0,withShortcut:o=!0}=e,c=(0,l.ok)();return(0,s.jsx)(r.$n,{icon:t.icon,"data-testid":"ai-chat-button",iconOnly:!n,size:"medium",variant:"header",className:"h-9 px-2.5 @max-2xl:[&_.button-content]:hidden",label:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.t)(c,"ai_chat_ask",t.label),o?(0,s.jsx)(i.S,{keys:["mod","i"],className:"border-tint-11 text-tint-1"}):null]}),onClick:()=>t.open(),children:n?(0,a.t)(c,"ask"):null})}},60544:(e,t,n)=>{n.r(t),n.d(t,{AIChatControlButton:()=>o});var s=n(54568),l=n(88118),a=n(96021),r=n(55809),i=n(54217);function o(){let e=(0,l.ok)(),t=(0,r.J4)(),n=(0,r.C8)();return t.messages.length>0?(0,s.jsx)(i.$n,{onClick:()=>{n.clear()},iconOnly:!0,icon:"trash-can",label:(0,a.t)(e,"ai_chat_clear_conversation"),variant:"blank",size:"default",className:"animate-blur-in-slow"}):null}},66929:(e,t,n)=>{n.d(t,{ScrollContainer:()=>c});var s=n(54568),l=n(88118),a=n(98743),r=n(7620),i=n(40965),o=n(90983);function c(e){let{children:t,className:n,contentClassName:c,orientation:u,fadeEdges:d=["leading","trailing"],active:h,leadingEdgeScrollClassName:m,trailingEdgeScrollClassName:p,...x}=e,f=r.useRef(null),[g,v]=r.useState(0),[b,y]=r.useState(0),k=(0,l.ok)();return(0,i.F)(()=>{let e=f.current;e&&(y("horizontal"===u?e.scrollWidth-e.clientWidth-1:e.scrollHeight-e.clientHeight-1),v("horizontal"===u?e.scrollLeft:e.scrollTop))},f),r.useEffect(()=>{let e=f.current;if(!e)return;let t=new ResizeObserver(e=>{let[t]=e;t&&y("horizontal"===u?t.target.scrollWidth-t.target.clientWidth-1:t.target.scrollHeight-t.target.clientHeight-1)});return t.observe(e),()=>t.disconnect()},[u]),r.useEffect(()=>{let e=f.current;if(!e||!h)return;let t="string"==typeof h?document.getElementById(h):h.current;t&&e.contains(t)&&function(e,t){let n=t.getBoundingClientRect(),s=e.getBoundingClientRect();t.scrollTo({top:t.scrollTop+(s.top-n.top)-t.clientHeight/2+s.height/2,left:t.scrollLeft+(s.left-n.left)-t.clientWidth/2+s.width/2,behavior:"smooth"})}(t,e)},[h]),(0,s.jsxs)("div",{className:(0,a.P)("group/scroll-container relative flex overflow-hidden",n,g>0?m:"",g<b?p:""),...x,children:[(0,s.jsx)("div",{className:(0,a.P)("flex shrink grow","horizontal"===u?"no-scrollbar":"hide-scrollbar","horizontal"===u?"overflow-x-scroll":"flex-col overflow-y-auto",d.includes("leading")&&g>0?"horizontal"===u?"mask-l-from-[calc(100%-2rem)]":"mask-t-from-[calc(100%-2rem)]":"",d.includes("trailing")&&g<b?"horizontal"===u?"mask-r-from-[calc(100%-2rem)]":"mask-b-from-[calc(100%-2rem)]":"",c),ref:f,children:t}),(0,s.jsx)(o.Button,{icon:"horizontal"===u?"chevron-left":"chevron-up",iconOnly:!0,size:"xsmall",variant:"secondary",tabIndex:-1,className:(0,a.P)("bg-tint-base!","horizontal"===u?"-translate-y-1/2! top-1/2 left-0 ml-2":"-translate-x-1/2! top-0 left-1/2 mt-2","absolute not-pointer-none:block hidden scale-0 opacity-0 transition-[scale,opacity]",g>0?"not-pointer-none:group-hover/scroll-container:scale-100 not-pointer-none:group-hover/scroll-container:opacity-11":"pointer-events-none"),onClick:()=>{let e=f.current;e&&e.scrollTo({top:"vertical"===u?g-e.clientHeight:void 0,left:"horizontal"===u?g-e.clientWidth:void 0,behavior:"smooth"})},label:(0,l.si)(k,"scroll_back")}),(0,s.jsx)(o.Button,{icon:"horizontal"===u?"chevron-right":"chevron-down",iconOnly:!0,size:"xsmall",variant:"secondary",tabIndex:-1,className:(0,a.P)("bg-tint-base!","horizontal"===u?"-translate-y-1/2! top-1/2 right-0 mr-2":"-translate-x-1/2! bottom-0 left-1/2 mb-2","absolute not-pointer-none:block hidden scale-0 transition-[scale,opacity]",g<b?"not-pointer-none:group-hover/scroll-container:scale-100 not-pointer-none:group-hover/scroll-container:opacity-11":"pointer-events-none"),onClick:()=>{let e=f.current;e&&e.scrollTo({top:"vertical"===u?g+e.clientHeight:void 0,left:"horizontal"===u?g+e.clientWidth:void 0,behavior:"smooth"})},label:(0,l.si)(k,"scroll_further")})]})}},73598:(e,t,n)=>{n.d(t,{u:()=>i,y:()=>r});var s=n(54568),l=n(82745),a=n(50273);function r(e){let{className:t="size-4",size:n,trademark:a=!0,state:r="default",...i}=e;return a?(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",preserveAspectRatio:"xMaxYMid meet",className:t,"aria-busy":"thinking"===r,overflow:"visible",...i,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:"GitBook Assistant"}),(0,s.jsx)("path",{d:"M12.8916 1.06265C12.921 0.979101 13.0392 0.979127 13.0685 1.06267C13.239 1.5478 13.3439 1.84646 13.516 2.1032C13.6683 2.33042 13.8578 2.53033 14.0766 2.6945C14.3239 2.88 14.6165 3.00068 15.0919 3.19671C15.1761 3.23142 15.1761 3.3506 15.0919 3.38531C14.6165 3.58134 14.3239 3.70203 14.0766 3.88752C13.8578 4.05169 13.6683 4.2516 13.516 4.47882C13.3439 4.73556 13.239 5.03423 13.0685 5.51937C13.0392 5.60291 12.921 5.60292 12.8916 5.51938C12.7212 5.03423 12.6162 4.73557 12.4442 4.47882C12.2919 4.2516 12.1023 4.05169 11.8835 3.88752C11.6363 3.70202 11.3436 3.58134 10.8682 3.38531C10.7841 3.3506 10.7841 3.23141 10.8683 3.1967C11.3436 3.00067 11.6363 2.87999 11.8835 2.6945C12.1023 2.53033 12.2919 2.33042 12.4442 2.1032C12.6162 1.84646 12.7212 1.54779 12.8916 1.06265Z",stroke:"currentColor",strokeWidth:"intro"===r?"1.2":"1",strokeLinejoin:"round",shapeRendering:"crispEdges",className:"transition-opacity duration-300",style:{animation:{intro:"fadeIn .5s .5s backwards, spin 2s .5s forwards cubic-bezier(0.43,1.54,0.64,1)",thinking:"spin 2s 1s infinite forwards cubic-bezier(0.16,1,0.3,1)",working:"spin 2s 1s infinite forwards cubic-bezier(0.16,1,0.3,1)",done:"",confirm:"",default:"",error:""}[r],transitionDelay:"default"===r||"thinking"===r?".3s":void 0,opacity:+!["done","confirm","error"].includes(r),transformOrigin:"13px 3.5px"}}),(0,s.jsxs)("g",{clipPath:"url(#clip0_153_2034)",className:"transition-opacity duration-300",style:{color:"rgb(var(--danger-9))",opacity:+("error"===r),transitionDelay:"error"===r?".3s":void 0},children:[(0,s.jsx)("path",{d:"M13.0312 1.42059L13.0312 3.95184",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M13.0312 6.00253V6.00263",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}),(0,s.jsx)("path",{d:"M10.8051 3.71161L12.2401 5.27411L14.823 2.14911",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",className:"transition-opacity duration-300",style:{opacity:+("done"===r),transitionDelay:"done"===r?".3s":void 0}}),(0,s.jsx)("path",{className:"transition-opacity duration-300",style:{fill:"rgb(var(--primary-9))",opacity:+("confirm"===r),transitionDelay:"confirm"===r?".3s":void 0,animation:{intro:"",thinking:"",working:"",done:"",confirm:"bounceSmall 1s infinite both",default:"",error:""}[r]},d:"M12.9463 5.24512C13.3688 5.24422 13.713 5.58625 13.7139 6.00879C13.7146 6.43114 13.3725 6.77338 12.9502 6.77441C12.5279 6.77505 12.1845 6.43408 12.1836 6.01172C12.1828 5.58953 12.5242 5.24649 12.9463 5.24512ZM13.0391 0.0751953C14.0688 0.0730893 14.9049 0.90586 14.9072 1.93555C14.9084 2.5063 14.6484 3.04679 14.2012 3.40137L13.7773 3.7373C13.6151 3.86604 13.5201 4.06239 13.5205 4.26953V4.30371C13.5211 4.62139 13.2639 4.879 12.9463 4.87988C12.6288 4.88032 12.3701 4.62417 12.3691 4.30664V4.27246C12.3679 3.71272 12.6238 3.18263 13.0625 2.83496L13.4854 2.49902C13.6565 2.36341 13.7562 2.1568 13.7559 1.93848C13.755 1.54463 13.4358 1.22503 13.042 1.22559H12.9385C12.488 1.22679 12.1225 1.59352 12.123 2.04395L12.124 2.21875C12.1245 2.53649 11.8676 2.79522 11.5498 2.7959C11.2321 2.79653 10.9746 2.53928 10.9736 2.22168L10.9727 2.04688C10.9706 0.960578 11.8493 0.0778178 12.9355 0.0751953H13.0391Z"}),(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",strokeOpacity:"0.25",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:{intro:"fadeIn 2s forwards",thinking:"",working:"",done:"",confirm:"",default:"",error:""}[r]}}),(0,s.jsx)("mask",{id:"mask0_220_25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"1",width:"16",height:"14",children:(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949M1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L10.9095 6.80362M1 8.01949C1 6.4945 2.03973 5.30731 2.5596 4.90434L7.37937 2.12165C7.79013 1.88449 8.26417 1.80476 8.71747 1.88245",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,s.jsx)("g",{mask:"url(#mask0_220_25)",children:(0,s.jsx)("path",{d:"M3.5625 8.78512L7.26347 10.9219C7.88227 11.2791 8.64467 11.2791 9.26347 10.9219L14.25 8.0429C14.5833 7.85045 15 8.09101 15 8.47591V10.2777C15 10.4563 14.9047 10.6214 14.75 10.7107L9.26347 13.8784C8.64467 14.2356 7.88228 14.2356 7.26347 13.8784L3.5625 11.7416C2.70833 11.2978 1 9.93199 1 8.01949C1 6.6448 1.84765 5.98698 2.62903 5.71701C3.15426 5.53555 3.71577 5.70568 4.19701 5.98353L7.26347 7.75395C7.88228 8.11122 8.64467 8.11122 9.26347 7.75395L14.1991 4.90434L9.37937 2.12165C8.76057 1.76438 7.99907 1.76386 7.38027 2.12113C5.89314 2.97972 3.20298 4.53289 2.5596 4.90434C1.77376 5.35804 1 6.11597 1.00148 7.9207",stroke:"currentColor",pathLength:"100",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:{intro:"pathEnter 1.5s both ease-out",thinking:"pathLoading 2s infinite both",working:"pathLoading 2s infinite both",done:"pathEnter 1s forwards ease",confirm:"",default:"",error:""}[r]}})})]}):(0,s.jsx)(l.Icon,{icon:"sparkle",...i,className:t,style:{animation:{intro:"spin 2s forwards cubic-bezier(0.16,1,0.3,1)",thinking:"spin 2s infinite forwards cubic-bezier(0.16,1,0.3,1)",working:"spin 2s infinite forwards cubic-bezier(0.16,1,0.3,1)",done:"",confirm:"",default:"",error:""}[r]}})}function i(e){let{className:t="size-4",state:n="default"}=e;return(0,s.jsxs)("div",{style:{position:"relative",animation:{intro:"fadeIn 1s both, orbit 1s cubic-bezier(0.16,1,0.3,1)",thinking:"fadeIn 1s both, orbit 1s orbit 2s 1s infinite forwards linear ease-out,",working:"",done:"",confirm:"",default:"",error:""}[n]},children:[(0,s.jsx)(l.Icon,{icon:"search",className:t}),(0,s.jsx)(l.Icon,{icon:"sparkle",iconStyle:a.p.Solid,style:{position:"absolute",top:"15.7%",left:"15.6%",width:"50%",height:"50%",animation:{intro:"spin 2s .5s forwards cubic-bezier(0.16,1,0.3,1)",thinking:"spin 2s infinite forwards cubic-bezier(0.16,1,0.3,1)",working:"spin 2s infinite forwards cubic-bezier(0.16,1,0.3,1)",done:"",confirm:"",default:"",error:""}[n]}})]})}},75742:(e,t,n)=>{n.d(t,{Ac:()=>i,Bk:()=>h,Do:()=>o,ES:()=>r,VN:()=>a,XO:()=>c,a8:()=>m,bY:()=>d,tP:()=>u});var s=n(54568),l=n(98743);let a=n(7620).forwardRef((e,t)=>{let{children:n,...a}=e;return(0,s.jsx)("div",{...a,className:(0,l.P)("flex h-full grow overflow-hidden bg-radial-[circle_at_bottom] from-primary to-50% to-transparent text-sm text-tint",a.className),ref:t,children:n})});function r(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:t})}function i(e){let{children:t}=e;return(0,s.jsx)("div",{className:"relative z-10 flex not-hydrated:animate-blur-in-slow select-none items-center gap-2 px-4 py-2.5 text-tint-strong",children:t})}function o(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex h-8 flex-1 flex-col justify-center",children:t})}function c(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex flex-1 flex-col overflow-hidden",children:t})}function u(e){let{children:t}=e;return(0,s.jsx)("div",{className:"font-bold",children:t})}function d(e){let{children:t,className:n}=e;return(0,s.jsx)("div",{className:(0,l.P)("origin-left text-tint text-xs leading-none transition-all duration-500",n),children:t})}function h(e){let{children:t}=e;return(0,s.jsx)("div",{className:"flex w-13 shrink-0 origin-top not-hydrated:animate-blur-in-slow flex-col gap-2 overflow-hidden border-tint-solid/3 border-r bg-tint-solid/1 p-2 transition-all transition-discrete duration-300 empty:hidden empty:w-0 empty:px-0",children:t})}function m(e){let{children:t,className:n}=e;return(0,s.jsx)("div",{className:(0,l.P)("flex gap-2",n),children:t})}},78700:(e,t,n)=>{n.d(t,{t:()=>p,h:()=>x});var s=n(54568),l=n(88118),a=n(96021),r=n(98743),i=n(5772),o=n(58541),c=n(54217),u=n(85598);function d(e){let{chat:t}=e,n=(0,l.ok)();return(0,o.vC)("mod+enter",e=>{var n;e.preventDefault(),null==(n=t.pendingTools[0])||n.confirm()},{enableOnFormTags:!0},[t.pendingTools]),(0,s.jsx)("div",{className:"flex w-full flex-wrap justify-end gap-2 empty:hidden",children:t.pendingTools.map((e,t)=>(0,s.jsxs)("div",{className:"flex w-full animate-present-slow flex-col gap-1",style:{animationDelay:"".concat(.5+.1*t,"s")},children:[(0,s.jsx)(c.$n,{onClick:()=>{e.confirm()},tabIndex:t,label:e.label,className:"w-full justify-center",size:0===t?"default":"medium",variant:0===t?"primary":"secondary",icon:e.icon}),0===t&&(0,s.jsx)("div",{className:"flex pointer-none:hidden w-full animate-fade-in-slow items-center justify-end gap-2 text-tint text-xs",style:{animationDelay:"1000ms"},children:(0,a.t)(n,"press_to_confirm",(0,s.jsx)(u.S,{keys:["mod","enter"],className:"mx-0 text-tint"}))})]},t))})}var h=n(28463);function m(e){let{chat:t,chatController:n}=e;return 0===t.followUpSuggestions.length?null:(0,s.jsx)("div",{className:"flex grow flex-col",children:(0,s.jsx)("div",{className:"sticky bottom-0 mt-auto flex flex-col items-start gap-2","data-testid":"ai-chat-followup-suggestions",children:t.followUpSuggestions.map((e,t)=>(0,s.jsx)(c.$n,{"data-testid":"ai-chat-followup-suggestion",onClick:()=>{n.postMessage({message:e})},label:e,className:"starting:h-0 max-w-full origin-left animate-blur-in-slow whitespace-normal border-none bg-primary-11/1 px-3 py-1.5 starting:py-0 text-left transition-all transition-discrete duration-500 *:whitespace-normal hover:bg-primary-hover",size:"medium",variant:"blank",style:{animationDelay:"".concat(250+Math.min(50*t,150),"ms")}},t))})})}function p(e){let{chat:t,chatController:n}=e,l=[],a=[];return t.messages.forEach((e,t)=>{e.role===i.W7K.User?(a.length>0&&l.push(a),a=[{message:e,originalIndex:t}]):a.push({message:e,originalIndex:t})}),a.length>0&&l.push(a),l.map((e,a)=>{let o=e===l[l.length-1];return(0,s.jsx)("div",{id:"message-group-".concat(a),className:(0,r.P)("flex flex-col gap-2 pt-2",o?"shrink-0 basis-full":"","transition-discrete"),style:{animationDelay:".2s"},children:e.map(e=>{let{message:l,originalIndex:a}=e,o=a===t.messages.length-1;return(0,s.jsxs)("div",{"data-testid":l.role===i.W7K.User?"ai-chat-message-user":"ai-chat-message-assistant",id:"message-".concat(a),className:(0,r.P)("flex flex-col gap-6","break-words","group/message","animate-blur-in-slow",o?"basis-full":"",l.role===i.W7K.User?"max-w-[80%] origin-top-right self-end circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint px-4 py-2":"origin-top-left text-tint-strong"),style:{animationDelay:"".concat(Math.min(.1*a,.6),"s")},children:[l.content,o&&l.role===i.W7K.Assistant?(0,s.jsxs)("div",{className:(0,r.P)("flex w-full shrink-0 flex-col gap-2 starting:opacity-0 transition-all transition-discrete duration-500",t.loading?"":"hidden opacity-0"),children:[(0,s.jsx)(x,{className:l.content?"hidden":""}),(0,s.jsx)(f,{})]}):null,o?(0,s.jsxs)(s.Fragment,{children:[!t.loading&&!t.error&&t.query&&t.responseId&&0===t.pendingTools.length?(0,s.jsx)(h.AIResponseFeedback,{responseId:t.responseId,query:t.query,className:"-ml-1 -mt-4"}):null,(0,s.jsx)(d,{chat:t}),(0,s.jsx)(m,{chat:t,chatController:n})]}):null]},a)})},a)})}function x(e){let{breakLines:t=!1,className:n}=e,i=(0,l.ok)();return(0,s.jsxs)("div",{className:(0,r.P)("animate-[heightIn_.5s_5s_ease_both] overflow-hidden py-2 text-tint-subtle [&.hidden]:animate-[heightOut_1s_ease-in_both]",n),children:[(0,a.s)(i,"ai_chat_hold_message_1").split(" ").map((e,t)=>(0,s.jsxs)("span",{className:"animate-blur-in-slow",style:{animationDelay:"".concat(5e3+200*t,"ms")},children:[e," "]},t)),t?(0,s.jsx)("br",{}):null,(0,a.s)(i,"ai_chat_hold_message_2").split(" ").map((e,t)=>(0,s.jsxs)("span",{className:"animate-blur-in-slow",style:{animationDelay:"".concat(1e4+200*t,"ms")},children:[e," "]},t))]})}function f(){return(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:Array.from({length:7}).map((e,t)=>(0,s.jsx)("div",{className:"h-4 animate-[blurIn_500ms_ease-out_both,pulse_1.5s_infinite] circular-corners:rounded-2xl rounded-corners:rounded-md bg-tint-solid/2",style:{width:"calc(".concat((4-t%4)*8+14,"% - 4px)"),animationDelay:"".concat(.1*t,"s")}},t))})}},85598:(e,t,n)=>{n.d(t,{S:()=>i});var s=n(54568),l=n(98743),a=n(82745),r=n(7620);function i(e){let{keys:t,className:n}=e,[i,o]=r.useState(null);return r.useEffect(()=>{o(function(){let e=navigator.platform.toLowerCase();return e.includes("mac")?"mac":(e.includes("win"),"win")}())},[]),(0,s.jsx)("div",{"aria-busy":null===i?"true":void 0,className:(0,l.P)('shortcut hidden justify-end gap-0.5 whitespace-nowrap text-tint text-xs [font-feature-settings:"calt","case"] contrast-more:text-tint-strong md:flex',i?"motion-safe:animate-fade-in motion-reduce:opacity-11":"opacity-0"),children:t.map((e,t)=>{let r=e;switch(e){case"mod":r="mac"===i?"⌘":"Ctrl";break;case"enter":r=(0,s.jsx)(a.Icon,{icon:"arrow-turn-down-left",className:"size-[.75em]"})}return(0,s.jsx)("kbd",{className:(0,l.P)("flex h-5 min-w-5 items-center justify-center rounded-md border border-tint-subtle px-1","mod"===e?"mac"===i?"text-sm":"text-xs":"uppercase",n),children:r},t)})})}},89608:(e,t,n)=>{n.d(t,{By:()=>s.integrationsAssistantTools,r0:()=>s.useIntegrationAssistants});var s=n(22399)},97306:(e,t,n)=>{n.r(t),n.d(t,{AIContextProvider:()=>m,useAI:()=>p});var s=n(54568),l=n(5772),a=n(82745),r=n(7620),i=n(88118),o=n(55809),c=n(99507),u=n(89608),d=n(21566);let h=r.createContext(null);function m(e){let{aiMode:t,trademark:n,suggestions:l,greeting:a,children:i}=e,o=r.useMemo(()=>({aiMode:t,trademark:n,suggestions:l,greeting:a}),[t,n,l,a]);return(0,s.jsx)(h.Provider,{value:o,children:i})}function p(){let e=function(){let e=r.useContext(h);if(!e)throw Error("useAI must be used within AIContextProvider");return e}(),t=(0,o.J4)(),n=(0,o.C8)(),m=(0,i.ok)(),[,p]=(0,d.useSearch)(),x=[];e.aiMode===l.RNV.Assistant?x.push({id:"gitbook-assistant",label:(0,c.YZ)(m,e.trademark),icon:(0,s.jsx)(c.yQ,{state:t.loading?"thinking":"default",trademark:e.trademark,className:"size-4"}),open:e=>{n.open(),e&&n.postMessage({message:e})},pageAction:!0,ui:!0,mode:"sidebar"}):e.aiMode===l.RNV.Search&&x.push({id:"gitbook-ai-search",label:(0,i.si)(m,"ai_chat_context_badge"),icon:(0,s.jsx)(c.ur,{}),open:e=>{e&&p(t=>t?{...t,query:null,ask:e,open:!0}:null)},pageAction:!1,ui:!1,mode:"search"});let f=(0,u.r0)();return f.length>0&&x.push(...f.map(e=>({...e,icon:(0,s.jsx)(a.Icon,{icon:e.icon,className:"size-4"}),open:t=>{p(e=>{var t,n;return{ask:null,query:null!=(t=null==e?void 0:e.query)?t:null,scope:null!=(n=null==e?void 0:e.scope)?n:"default",open:!1}}),e.open(t)}}))),{config:e,assistants:x}}},99507:(e,t,n)=>{n.d(t,{Fo:()=>s.AIChatBody,LN:()=>l.AIChatButton,Rk:()=>s.AIChatSubtitle,Xo:()=>s.AIChatDynamicIcon,YZ:()=>s.getAIChatName,k6:()=>i.AIChatControlButton,ph:()=>r.AIResponseFeedback,ur:()=>a.u,yQ:()=>a.y});var s=n(38305),l=n(60101),a=n(73598),r=n(28463),i=n(60544)}}]);